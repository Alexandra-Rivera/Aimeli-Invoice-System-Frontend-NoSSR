<app-nav-component titulo="Formulario Clientes" />

<section class="lg:mt-[10%] mt-[25%]">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <!-- Columna izquierda: Buscador y lista -->
    <section class="flex justify-center order-2 lg:order-1 flex-col items-center w-full">
      <!-- Formulario de Búsqueda -->
      <form
        [formGroup]="formularioBusqueda"
        class="flex flex-col gap-2 w-[90%] lg:w-[80%]"
      >
        <label for="search" class="font-semibold">Buscar Cliente: </label>
        <input
          type="search"
          name="searchbar"
          id="search"
          formControlName="nombre"
          class="rounded-full italic w-full p-2 border border-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Buscar cliente por nombre"
          (input)="buscarClientePorNombre()"
        />
      </form>

      <!-- Lista de Clientes -->
      <div class="snap-y bg-fondo-terciario rounded-xl scroll-py-4 overflow-y-auto h-[60vh] w-[90%] lg:w-[80%] p-4 custom-scrollbar mt-4">
        <ul class="snap-start px-10 py-1" *ngFor="let cliente of clientesLista; let i = index">
          <li class="flex justify-between items-center font-bold">
            {{ cliente.nombreCliente }}
            <button
              class="text-select-text-color font-bold cursor-pointer"
              (click)="editarCliente(cliente)"
            >
              Select
            </button>
          </li>
        </ul>
      </div>
    </section>

    <!-- Columna derecha: Formulario del cliente -->
    <section class="flex justify-center order-1 lg:order-2">
      <form [formGroup]="formularioClientes" class="formularioClientes" (ngSubmit)="handleSubmit()">
        <div class="mb-5">
          <label for="nombre" class="block mb-2 text-sm font-medium text-gray-900">
            Nombre del Cliente
          </label>
          <input
            type="text"
            id="nombre"
            class="w-96 p-2.5 border border-gray-300 rounded-full"
            placeholder="Cliente"
            required
            formControlName="nombre"
          />
        </div>
        <div class="mb-5">
          <label for="telefono" class="block mb-2 text-sm font-medium text-gray-900">
            Número de telefono
          </label>
          <input
            type="text"
            id="telefono"
            class="w-96 p-2.5 border border-gray-300 rounded-full"
            placeholder="0000-0000"
            required
            formControlName="telefono"
          />
        </div>
        <div class="flex flex-row items-center lg:mt-10 gap-4">
          <button
            class="boton-icono-eliminar-relleno hover:bg-red-700 transition"
            (click)="eliminarCliente()"
            type="button"
          >
            <svg class="w-6 h-6 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                stroke-width="2"
                d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z" />
            </svg>
          </button>
          <button
            class="boton-redondeado-oscuro h-11 lg:w-[20vw] hover:bg-blue-900 transition"
            (click)="estaEditando ? actualizarCliente() : crearCliente()"
            type="submit"
          >
            Guardar Cliente
          </button>
        </div>
        <button
        id="buttonAgregarCliente"
        type="button"
        (click)="agregarCliente()"
        *ngIf="mostrarBoton"
        class="mt-10 mx-auto font-semibold text-blue-900 cursor-pointer"
      >
        Agregar nuevo Cliente
      </button>
      </form>
    </section>
  </div>
</section>
